{"version":3,"sources":["urls/friendsUrls.js","context/SocketContext.js","components/AuthInput/AuthInput.js","views/Auth/Auth.js","components/PrivateRoute/PrivateRoute.js","components/PreLoader/PreLoader.js","frontUrls/frontAuthUrl.js","urls/profileUrls.js","services/ProfileService/ProfileService.js","components/ProfileData/ProfileData.js","urls/partyUrls.js","services/PartyService/PartyService.js","components/btns/btns.js","components/Overlay/Overlay.js","components/Party/Party.js","urls/queueUrls.js","services/QueueService/QueueService.js","components/Search/Search.js","views/MathMaking/MatchMaking.js","components/Navbar/Navbar.js","services/FriendsService/FriendsService.js","components/Friend/Friend.js","views/Friends/Friends.js","components/Invite/Invite.js","components/FriendReq/FriendReq.js","components/Notifications/Notifications.js","urls/notificationsUrls.js","services/NotificationsService/NotificationsService.js","views/NotificationsView/NotificationsView.js","App.js","serviceWorker.js","index.js","urls/authUrls.js","services/AuthService/AuthService.js","services/JwtErrorService/JwtErrorService.js","urls/socketUrl.js","services/TokenService/TokenService.js","urls/baseUrl.js"],"names":["friendListUrl","baseUrl","addFriendUrl","removeFriendUrl","SocketContext","createContext","socket","io","connect","socketUrl","AuthInput","placeHodler","rest","type","className","placeholder","Auth","setSocket","useState","isLogin","setIsLogin","email","setEmail","password","setPassword","username","setUsername","so2_id","setSo2_id","so2_nickname","setSo2_nickname","err","setErr","isAuthtorizing","setIsAuthtorizing","a","length","AuthService","singup","result","authorize","then","console","log","signin","signinResult","name","onChange","e","target","value","onClick","signIn","signUp","PrivateRoute","path","children","useContext","PreLoader","require","default","profileUrl","ProfileService","fetch","method","headers","Authorization","TokenService","getAccessToken","res","json","body","JwtErrorService","refreshByErr","this","GetOwnProfie","GetProfileByUsername","user","ProfileData","rating","bio","profile","setProfile","useEffect","inviteToPartyUrl","acceptInviteUrl","rejectInviteUrl","leavePartyUrl","getPartyUrl","PartyService","JSON","stringify","access_token","error","id","leaveParty","data","CancelBtn","SubmitBtn","Overlay","show","Party","players","party","setParty","setTarget","showOverlay","setShowOverlay","on","getParty","off","sendInvite","map","player","key","joinQueueUrl","leaveQueueUrl","QueueService","partyStatuses","Search","isInSearch","setIsInSearch","shake","setShake","shakeAnime","setTimeout","status","context","LeaveQueue","JoinQueue","MatchMaking","routes","url","Navbar","location","useLocation","route","pathname","to","v4","FriendsService","friendName","addFriend","friendId","Friend","destroy","removeFriend","Friends","friends","setFriends","getFriends","friend","index","prevState","splice","Invite","from","isRemoving","setIsRemoving","rejectInvite","cancel","acceptInvite","accept","FriendReq","removing","setRemoving","Notifications","notifications","setNotifications","nots","notification","uuid","getNotsUrl","NotificationsService","NotificationsView","setNots","get","destroyFriendReq","destroyPartyReq","App","showPreloader","setShowPreloader","Provider","exact","Boolean","window","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message","signupUrl","signinUrl","refreshUrl","setAccessToken","refreshToken","refresh_token","accessToken","query","token","secure","AauthService","refreshAccessToken","getRefreshToken","clear","localStorage","getItem","setItem"],"mappings":"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","file":"static/js/main.6f7ec051.chunk.js","sourcesContent":["import baseUrl from './baseUrl';\r\n\r\nexport const friendListUrl = baseUrl + '/api/friends';\r\nexport const addFriendUrl = baseUrl + '/api/friends/add';\r\nexport const removeFriendUrl = baseUrl + '/api/friends/remove';\r\n","import { createContext } from 'react'\r\nimport io from 'socket.io-client';\r\nimport socketUrl from '../urls/socketUrl';\r\n\r\nconst SocketContext = createContext({\r\n    socket: io.connect(socketUrl)\r\n})\r\nexport default  SocketContext;","import React from 'react'\r\nimport './AuthInput.scss'\r\n\r\nexport default function AuthInput({placeHodler = null, ...rest}) {\r\n    return (\r\n        <input type=\"text\" className=\"authInput\" placeholder={placeHodler} {...rest}/>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport AuthInput from '../../components/AuthInput/AuthInput';\r\nimport './Auth.scss';\r\nimport AuthService from '../../services/AuthService/AuthService';\r\n\r\nfunction Auth({ setSocket }) {\r\n\tconst [isLogin, setIsLogin] = useState(false);\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [username, setUsername] = useState('');\r\n\tconst [so2_id, setSo2_id] = useState('');\r\n\tconst [so2_nickname, setSo2_nickname] = useState('');\r\n\tconst [err, setErr] = useState('');\r\n\tconst [isAuthtorizing, setIsAuthtorizing] = useState(false);\r\n\r\n\tasync function signUp() {\r\n\t\tif (\r\n\t\t\temail.length > 2 &&\r\n\t\t\tusername.length > 2 &&\r\n\t\t\tpassword.length > 2 &&\r\n\t\t\tso2_id.length > 2 &&\r\n\t\t\tso2_nickname.length > 2 &&\r\n\t\t\t!isAuthtorizing\r\n\t\t) {\r\n\t\t\tsetIsAuthtorizing(true);\r\n\t\t\tconst result = await AuthService.singup(username, password, email, so2_nickname, so2_id);\r\n\t\t\t\r\n\t\t\tif (result.err) {\r\n\t\t\t\tsetErr(result.err);\r\n\t\t\t\tsetIsAuthtorizing(false);\r\n\t\t\t} else {\r\n\t\t\t\tawait AuthService.authorize().then((socket) => {\r\n\t\t\t\t\tconsole.log(socket, 'signing up');\r\n\t\t\t\t\tsetSocket(socket);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetErr('Минимальная длинна каждого поля 2 символа');\r\n\t\t}\r\n\t}\r\n\r\n\tasync function signIn() {\r\n\t\tif (username.length > 2 && password.length > 2 && isAuthtorizing === false) {\r\n\t\t\tsetIsAuthtorizing(true);\r\n\t\t\tconst signinResult = await AuthService.signin(username, password);\r\n\r\n\t\t\tif (!signinResult.err) {\r\n\t\t\t\tconst socket = await AuthService.authorize();\r\n\t\t\t\tsetSocket(socket);\r\n\t\t\t} else {\r\n\t\t\t\tsetErr(signinResult.err);\r\n\t\t\t\tsetIsAuthtorizing(false);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetErr('Минимальная длинна челена 2 символа')\r\n\t\t}\r\n\t}\r\n\r\n\tif (isLogin) {\r\n\t\treturn (\r\n\t\t\t<div className=\"auth\">\r\n\t\t\t\t<AuthInput placeHodler=\"Никнейм\" name=\"email\" onChange={(e) => setUsername(e.target.value)} />\r\n\t\t\t\t<AuthInput placeHodler=\"Пароль\" name=\"password\" onChange={(e) => setPassword(e.target.value)} />\r\n\r\n\t\t\t\t<p className=\"err\">{err}</p>\r\n\t\t\t\t<button className={`signin ${isAuthtorizing}`} onClick={() => signIn()}>\r\n\t\t\t\t\tВойти\r\n\t\t\t\t</button>\r\n\t\t\t\t<button className={`signup ${isAuthtorizing}`} onClick={() => setIsLogin(false)}>\r\n\t\t\t\t\tНет аккаунта\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t<div className=\"auth\">\r\n\t\t\t\t<AuthInput placeHodler=\"Email\" name=\"new email\" onChange={(e) => setEmail(e.target.value)} />\r\n\t\t\t\t<AuthInput placeHodler=\"Никнейм\" name=\"new nickname\" onChange={(e) => setUsername(e.target.value)} />\r\n\t\t\t\t<AuthInput placeHodler=\"Пароль\" name=\"new password\" onChange={(e) => setPassword(e.target.value)} />\r\n\t\t\t\t<AuthInput placeHodler=\"SO2 никнейм\" onChange={(e) => setSo2_nickname(e.target.value)} />\r\n\t\t\t\t<AuthInput placeHodler=\"SO2 id\" onChange={(e) => setSo2_id(e.target.value)} />\r\n\r\n\t\t\t\t<p className=\"err\">{err}</p>\r\n\t\t\t\t<button className={`signup ${isAuthtorizing}`} onClick={() => signUp()}>\r\n\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t</button>\r\n\t\t\t\t<button className={`signin ${isAuthtorizing}`} onClick={() => setIsLogin(true)}>\r\n\t\t\t\t\tУже есть аккаунт\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Auth;\r\n","import React, { useContext } from 'react';\r\nimport SocketContext from '../../context/SocketContext';\r\nimport { Route } from 'react-router';\r\nimport Auth from '../../views/Auth/Auth';\r\n\r\nexport default function PrivateRoute({ path, setSocket, children, ...rest }) {\r\n\tconst { socket } = useContext(SocketContext);\r\n\t\r\n\tif (!socket) {\r\n\t\treturn <Auth setSocket={setSocket} />;\r\n\t} else {\r\n\t\treturn (\r\n\t\t<Route path={path} {...rest} >\r\n\t\t\t{children}\r\n\t\t</Route>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport './PreLoader.scss';\r\n\r\nexport default function PreLoader() {\r\n    return (\r\n        <div className=\"preloader\">\r\n            <div className=\"dot first\"></div>\r\n            <div className=\"dot second\"></div>\r\n            <div className=\"dot last\"></div>\r\n        </div>\r\n    )\r\n}","export const frontAuthUrl = '/auth'","const { default: baseUrl } = require(\"./baseUrl\");\r\n\r\nexport const profileUrl = baseUrl + '/api/user';\r\nexport const profileByIdUrl = baseUrl + '/api/user/';\r\n","import { profileUrl } from '../../urls/profileUrls';\r\nimport TokenService from '../TokenService/TokenService';\r\nimport JwtErrorService from '../JwtErrorService/JwtErrorService';\r\n\r\nexport default class ProfileService {\r\n\tstatic async GetOwnProfie() {\r\n\t\tconst res = await fetch(profileUrl, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: 'Bearer ' + TokenService.getAccessToken(),\r\n            }\r\n        });\r\n        \r\n        const body = await res.json();\r\n        console.log(body, 'get profile');\r\n\r\n        if (body.err) {\r\n            const result = await JwtErrorService.refreshByErr(body.err);\r\n            if (result) {\r\n                this.GetOwnProfie();\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return body;\r\n        }\r\n    }\r\n    \r\n    static async GetProfileByUsername(username) {\r\n\t\tconst res = await fetch(profileUrl + username, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: 'Bearer ' + TokenService.getAccessToken(),\r\n            }\r\n        });\r\n        \r\n        const body = await res.json();\r\n        console.log(body, 'get profile by username');\r\n\r\n        if (body.err) {\r\n            const result = await JwtErrorService.refreshByErr(body.err);\r\n            if (result) {\r\n                this.GetProfileByUsername(username);\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return body.user;\r\n        }\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport ProfileService from '../../services/ProfileService/ProfileService';\r\n\r\nimport './ProfileData.scss';\r\n\r\nexport default function ProfileData() {\r\n\tconst [profile, setProfile] = useState({\r\n\t\tusername: '',\r\n\t\trating: 0,\r\n\t\tbio: ''\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tProfileService.GetOwnProfie().then((profile) => {\r\n\t\t\tif (profile) {\r\n\t\t\t\tsetProfile(profile);\r\n\t\t\t} else {\r\n\t\t\t\t// window.location.href = '/auth';\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"userData\">\r\n\t\t\t<div className=\"avatar\"></div>\r\n\t\t\t<div className=\"textData\">\r\n\t\t\t\t<div className=\"username\">{profile.username}</div>\r\n\t\t\t\t<div className=\"rating\">{profile.rating}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"bio\">\r\n\t\t\t\t{profile.bio}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import baseUrl from \"./baseUrl\";\r\n\r\nexport const inviteToPartyUrl = baseUrl + '/api/party/invite';\r\nexport const acceptInviteUrl = baseUrl + '/api/party/join';\r\nexport const rejectInviteUrl = baseUrl + '/api/party/reject'\r\nexport const leavePartyUrl = baseUrl + '/api/party/leave';\r\nexport const getPartyUrl = baseUrl + '/api/party/';\r\n","import { inviteToPartyUrl, acceptInviteUrl, leavePartyUrl, getPartyUrl, rejectInviteUrl } from \"../../urls/partyUrls\";\r\nimport TokenService from \"../TokenService/TokenService\";\r\nimport JwtErrorService from \"../JwtErrorService/JwtErrorService\";\r\n\r\nexport default class PartyService {\r\n    static async sendInvite(username) {\r\n        const res = await fetch(inviteToPartyUrl, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                access_token: TokenService.getAccessToken(),\r\n                username: username\r\n            })\r\n        })\r\n        const body = await res.json();\r\n        console.log(body, 'send invite');\r\n\r\n        if (body.err) {\r\n            console.error(body.err)\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static async acceptInvite(id) {\r\n        console.log(id)\r\n        const res = await fetch(acceptInviteUrl, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                access_token: TokenService.getAccessToken(),\r\n                id: id\r\n            })\r\n        })\r\n        const body = await res.json();\r\n        console.log(body, 'accept invite');\r\n\r\n        if (body.err) {\r\n           console.error(body.err)\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static async rejectInvite(id) {\r\n        console.log(id);\r\n\r\n        const res = await fetch(rejectInviteUrl, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                id: id\r\n            })\r\n        });\r\n\r\n        const body = await res.json();\r\n        console.log(body, 'reject invite');\r\n\r\n        if (body.err) {\r\n           console.error(body.err)\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static async leaveParty() {\r\n        const res = await fetch(leavePartyUrl, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                access_token: TokenService.getAccessToken()\r\n            })\r\n        })\r\n        const body = await res.json();\r\n        console.log(body, 'leave party');\r\n\r\n        if (body.err) {\r\n            const token = JwtErrorService.refreshByErr(body.err);\r\n            if (token) this.leaveParty();\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static async getParty() {\r\n        const res = await fetch(getPartyUrl, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n            }\r\n        });\r\n\r\n        const body = await res.json();\r\n        console.log(body, 'gett party');\r\n\r\n        if (body.err) {\r\n            console.error(body.err)\r\n        } else {\r\n            return body.data;\r\n        }\r\n    }\r\n}","import React from 'react'\r\nimport './btns.scss'\r\n\r\nexport function CancelBtn({ children, ...rest }) {\r\n\treturn (\r\n\t\t<button className=\"btns cancel\" {...rest}>\r\n\t\t\t{children}\r\n\t\t</button>\r\n\t);\r\n}\r\n\r\nexport function SubmitBtn({ children, ...rest }) {\r\n\treturn (\r\n\t\t<button className=\"btns submit\" {...rest}>\r\n\t\t\t{children}\r\n\t\t</button>\r\n\t);\r\n}","import React from 'react';\r\nimport './Overlay.scss';\r\n\r\nexport default function Overlay({ show, children }) {\r\n    return (\r\n        <div className={\"overlay \" + show}>{children}</div>\r\n    )\r\n}","import React, { useContext, useState, useEffect } from 'react';\r\nimport SocketContext from '../../context/SocketContext';\r\nimport './Party.scss';\r\nimport PartyService from '../../services/PartyService/PartyService';\r\nimport { CancelBtn, SubmitBtn } from '../btns/btns';\r\nimport Overlay from '../Overlay/Overlay';\r\n\r\n\r\nexport default function Party() {\r\n\tconst { socket } = useContext(SocketContext);\r\n\tconst [party, setParty] = useState({\r\n\t\tplayers: []\r\n\t});\r\n\tconst [target, setTarget] = useState('');\r\n\tconst [showOverlay, setShowOverlay] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsocket.on('party', (party) => {\r\n\t\t\tconsole.log(party, 'socket party')\r\n\t\t\tsetParty(party.data);\r\n\t\t});\r\n\t\t\r\n\t\tPartyService.getParty().then(party => {\r\n\t\t\tconsole.log(party, 'fetch party')\r\n\t\t\tsetParty(party)\r\n\t\t})\r\n\t\treturn () => {\r\n\t\t\tsocket.off('party');\r\n\t\t};\r\n\t}, [socket]);\r\n\r\n\tfunction sendInvte() {\r\n\t\tsetShowOverlay(false);\r\n\t\tconsole.log(target);\r\n\t\tPartyService.sendInvite(target);\r\n\t\tsetTarget('');\r\n\t}\r\n\r\n\tfunction leave() {\r\n\t\tPartyService.leaveParty();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"party\">\r\n\t\t\t<Overlay show={showOverlay}>\r\n\t\t\t\t<div className=\"invite\">\r\n\t\t\t\t\t<input type=\"target\" onChange={(e) => setTarget(e.target.value)} value={target} />\r\n\t\t\t\t\t<div className=\"controls\">\r\n\t\t\t\t\t\t<CancelBtn onClick={() => setShowOverlay(false)}>Отмена</CancelBtn>\r\n\t\t\t\t\t\t<SubmitBtn onClick={() => sendInvte()}>Отправить</SubmitBtn>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Overlay>\r\n\r\n\t\t\t{party.players.map((player) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={player.username} className=\"member\">\r\n\t\t\t\t\t\t{player.username}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t{party.players.length !== 5 ? (\r\n\t\t\t\t<div className=\"addMember member\" onClick={() => setShowOverlay(true)}>\r\n\t\t\t\t\tПригласить игрока\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t''\r\n\t\t\t)}\r\n\t\t\t{party.players.length !== 1 ? (\r\n\t\t\t\t<div className=\"cancel member\" onClick={() => leave()}>\r\n\t\t\t\t\tВыйти\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t''\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n","const { default: baseUrl } = require(\"./baseUrl\");\r\n\r\nexport const joinQueueUrl = baseUrl + '/api/queue/join';\r\nexport const leaveQueueUrl = baseUrl + '/api/queue/leave';\r\n\r\n","import { joinQueueUrl, leaveQueueUrl } from \"../../urls/queueUrls\";\r\nimport TokenService from \"../TokenService/TokenService\";\r\n\r\nclass QueueService {\r\n    static async JoinQueue() {\r\n        const res = await fetch(joinQueueUrl, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n                'Content-type': 'application/json'\r\n            },\r\n            // body: JSON.stringify({\r\n            //     access_token: TokenService.getAccessToken()\r\n            // })\r\n        })\r\n        const body = await res.json();\r\n        console.log(body, 'join queue');\r\n\r\n        if (body.err) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static async LeaveQueue() {\r\n        const res = await fetch(leaveQueueUrl, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n                'Content-type': 'application/json'\r\n            }\r\n        })\r\n        const body = await res.json();\r\n        console.log(body, 'leave queue');\r\n\r\n        if (body.err) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n}\r\n\r\nexport default QueueService;","import React, { useContext, useState, useEffect } from 'react';\r\nimport SocketContext from '../../context/SocketContext';\r\nimport './Search.scss';\r\nimport QueueService from '../../services/QueueService/QueueService';\r\nimport PartyService from '../../services/PartyService/PartyService';\r\n\r\nconst partyStatuses = {\r\n\t'WAIT': 0,\r\n\t'QUEUE': 1,\r\n\t'IN_GAME': 2\r\n}\r\n\r\n\r\nexport default function Search() {\r\n\tconst { socket } = useContext(SocketContext);\r\n\tconst [isInSearch, setIsInSearch] = useState(false);\r\n\tconst [shake, setShake] = useState('');\r\n\r\n\tfunction joinQueue() {\r\n\t\tif (isInSearch) {\r\n\t\t\tQueueService.LeaveQueue().then((result) => (result ? setIsInSearch(false) : shakeAnime()));\r\n\t\t} else {\r\n\t\t\tQueueService.JoinQueue().then((result) => (result ? setIsInSearch(true) : shakeAnime()));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction shakeAnime() {\r\n\r\n\t\tsetShake('shake');\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShake('');\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tPartyService.getParty().then((party) => {\r\n\t\t\tif (party.status === partyStatuses.QUEUE) {\r\n\t\t\t\tsetIsInSearch(true);\r\n\t\t\t} else {\r\n\t\t\t\tsetIsInSearch(false);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on('queue', (context) => {\r\n\t\t\tconsole.log(context, 'search');\r\n\t\t\tif (context.data) {\r\n\t\t\t\tsetIsInSearch(true);\r\n\t\t\t} else {\r\n\t\t\t\tsetIsInSearch(false);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.off('queue');\r\n\t\t};\r\n\t}, [socket]);\r\n\r\n\treturn (\r\n\t\t<div className=\"search\">\r\n\t\t\t<button className={(isInSearch ? 'red ' : ' ') + shake} onClick={() => joinQueue()}>\r\n\t\t\t\t{isInSearch ? 'Отмена' : 'Искать'}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport './MathcMaking.scss';\r\nimport ProfileData from '../../components/ProfileData/ProfileData';\r\nimport Party from '../../components/Party/Party';\r\nimport Search from '../../components/Search/Search';\r\n\r\nexport default function MatchMaking() {\r\n\treturn (\r\n        <div className=\"matchMaking\">\r\n           \r\n            <ProfileData />\r\n            <Search />\r\n            <Party />\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\nimport './Navbar.scss';\r\nimport {  useLocation } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport { v4 } from 'uuid';\r\n\r\n\r\nconst routes = [\r\n    {\r\n        url: '/',\r\n        name: 'MM'\r\n    },\r\n    {\r\n        url: '/friends',\r\n        name: 'Friends'\r\n    },\r\n    {\r\n        url: '/notifications',\r\n        name: 'nots'\r\n    }\r\n]\r\n\r\nexport default function Navbar() {\r\n    const location = useLocation();\r\n\r\n    return (\r\n        <div className=\"navbar\">\r\n            {\r\n                routes.map(route => {\r\n                    return (\r\n                        <Link\r\n                            className={location.pathname === route.url ? \"navLink active\" : 'navLink'}\r\n                            to={route.url}\r\n                            key={v4()}\r\n                            >\r\n                            {route.name}\r\n                        </Link>\r\n                    )\r\n                })\r\n            }\r\n        </div>\r\n    )\r\n}","const { addFriendUrl, removeFriendUrl, friendListUrl } = require(\"../../urls/friendsUrls\");\r\nconst { default: TokenService } = require(\"../TokenService/TokenService\");\r\nconst { default: JwtErrorService } = require(\"../JwtErrorService/JwtErrorService\");\r\n\r\nclass FriendsService {\r\n    static async addFriend(friendName) {\r\n        const res = await fetch(addFriendUrl, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'Bearer ' +  TokenService.getAccessToken(),\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                access_token: TokenService.getAccessToken(),\r\n                username: friendName\r\n            })\r\n        })\r\n\r\n        const body = await res.json();\r\n        console.log(body, 'add friend');\r\n\r\n        if (body.err) {\r\n            const result = await JwtErrorService.refreshByErr(body.err);\r\n            if (result) {\r\n                this.addFriend(friendName);\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static async removeFriend(friendId) {\r\n        const res = await fetch(removeFriendUrl, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                id: friendId\r\n            })\r\n        })\r\n\r\n        const body = await res.json();\r\n        console.log(body, 'remove friend');\r\n\r\n        if (body.err) {\r\n            console.error(body.err);\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static async getFriends() {\r\n        const res = await fetch(friendListUrl, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n                // 'Content-type': 'application/json'\r\n            },\r\n            // body: JSON.stringify({\r\n            //     access_token: TokenService.getAccessToken()\r\n            // })\r\n        })\r\n\r\n        const body = await res.json();\r\n        console.log(body, 'get friends');\r\n\r\n        if (body.err) {\r\n            console.error(body.err);\r\n            return false;\r\n        } else {\r\n            return body;\r\n        }\r\n    }\r\n}\r\n\r\nexport default FriendsService;","import React from 'react';\r\n\r\nimport './Friend.scss';\r\nimport { CancelBtn, SubmitBtn } from '../btns/btns';\r\nimport PartyService from '../../services/PartyService/PartyService';\r\nimport FriendsService from '../../services/FriendsService/FriendsService';\r\n\r\nexport default function Friend({data, destroy = () => {}}) {\r\n\r\n    function RemoveFriend() {\r\n        FriendsService.removeFriend(data.id)\r\n        destroy();\r\n    }\r\n\r\n    function InviteToParty() {\r\n        PartyService.sendInvite(data.username);\r\n    }\r\n\r\n    return (\r\n        <div className=\"friend\">\r\n            <div className=\"data\">\r\n                <div className=\"username\">{data.username}</div>\r\n            </div>\r\n            <div className=\"controls\">\r\n                <CancelBtn onClick={() => RemoveFriend()}>Удалить</CancelBtn>\r\n                <SubmitBtn onClick={() => InviteToParty()}>Пригласить</SubmitBtn>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport FriendsService from '../../services/FriendsService/FriendsService';\r\nimport { SubmitBtn, CancelBtn } from '../../components/btns/btns';\r\nimport Overlay from '../../components/Overlay/Overlay';\r\n\r\nimport './Friends.scss'\r\nimport Friend from '../../components/Friend/Friend';\r\n\r\nexport default function Friends() {\r\n    const [friends, setFriends] = useState([]);\r\n    const [target, setTarget] = useState('');\r\n\r\n    const [showOverlay, setShowOverlay] = useState(false);\r\n    \r\n    useEffect(() => {\r\n        FriendsService.getFriends().then(friends => {\r\n            if (friends) {\r\n                console.log(friends[0])\r\n                setFriends(friends);\r\n            }\r\n        })\r\n    }, [])\r\n\r\n    function sendReq() {\r\n        setShowOverlay(false);\r\n        FriendsService.addFriend(target);\r\n        setTarget('');\r\n    }\r\n\r\n    function destroy(index) {\r\n        setFriends(prevState => {\r\n            const friends = [...prevState];\r\n            friends.splice(index);\r\n            return friends;\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"friends\">\r\n            <div className=\"controls\">\r\n                <SubmitBtn onClick={() => setShowOverlay(true)}>Добавить</SubmitBtn>\r\n            </div>\r\n            <Overlay show={showOverlay}>\r\n                <div className=\"addFriend\">\r\n                    <input type=\"target\" onChange={(e) => setTarget(e.target.value)} value={target} />\r\n                    <div className=\"controls\">\r\n                        <CancelBtn onClick={() => setShowOverlay(false)}>Отмена</CancelBtn>\r\n                        <SubmitBtn onClick={() => sendReq()}>Отправить</SubmitBtn>\r\n                    </div>\r\n                </div>\r\n            </Overlay>\r\n            {friends.map((friend, index) => {\r\n                return (\r\n                    <Friend key={friend.username} data={friend} destroy={() => destroy(index)}/>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n} ","import React, { useState } from 'react';\r\nimport { CancelBtn, SubmitBtn } from '../btns/btns';\r\nimport PartyService from '../../services/PartyService/PartyService';\r\n\r\nimport './Invite.scss'\r\n\r\nexport default function Invite({ id, from,  destroy }) {\r\n\tconst [isRemoving, setIsRemoving] = useState('')\r\n\r\n\tfunction cancel(id) {\r\n\t\tsetIsRemoving('remove')\r\n\t\tsetTimeout(() => {\r\n\t\t\tdestroy();\r\n\t\t}, 340)\r\n\t\tPartyService.rejectInvite(id);\r\n\t}\r\n\r\n\tfunction accept(id) {\r\n\t\tsetIsRemoving('remove')\r\n\t\tsetTimeout(() => {\r\n\t\t\tdestroy();\r\n\t\t}, 340)\r\n\t\tPartyService.acceptInvite(id);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={\"notification invite \" + isRemoving}>\r\n\t\t\t<p>Инвайт от {from}</p>\r\n\t\t\t<div className=\"controls\">\r\n\t\t\t\t<CancelBtn onClick={() => cancel(id)}>Отмена</CancelBtn>\r\n\t\t\t\t<SubmitBtn onClick={() => accept(id)}>Принять</SubmitBtn>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { CancelBtn, SubmitBtn } from '../btns/btns';\r\nimport FriendsService from '../../services/FriendsService/FriendsService';\r\n\r\nexport default function FriendReq({ from, destroy }) {\r\n\tconst [removing, setRemoving] = useState('');\r\n\r\n\tfunction cancel(username) {\r\n\t\tsetRemoving('remove')\r\n\t\tsetTimeout(() => {\r\n\t\t\tdestroy()\r\n\t\t}, 340)\r\n\t}\r\n\r\n\tfunction accept(username) {\r\n\t\tsetRemoving('remove')\r\n\t\tsetTimeout(() => {\r\n\t\t\tdestroy()\r\n\t\t}, 340)\r\n        FriendsService.addFriend(username)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={\"notification invite \" + removing}>\r\n\t\t\t<p>Приглашение в друзья от {from.username}</p>\r\n\t\t\t<div className=\"controls\">\r\n\t\t\t\t<CancelBtn onClick={() => cancel(from.username)}>Отмена</CancelBtn>\r\n\t\t\t\t<SubmitBtn onClick={() => accept(from.username)}>Принять</SubmitBtn>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect, useContext, useState } from 'react';\r\nimport SocketContext from '../../context/SocketContext';\r\nimport Invite from '../Invite/Invite';\r\nimport FriendReq from '../FriendReq/FriendReq';\r\nimport { v4 as uuid } from 'uuid';\r\n\r\nimport './Notifications.scss';\r\n\r\nexport default function Notifications() {\r\n\tconst { socket } = useContext(SocketContext);\r\n\tconst [notifications, setNotifications] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst destroy = (index) => {\r\n\t\t\tsetNotifications((prevState) => {\r\n\t\t\t\tconst nots = [...prevState];\r\n\t\t\t\tnots.splice(index, 1);\r\n\t\t\t\treturn nots;\r\n\t\t\t});\r\n\t\t};\r\n\t\tif (socket) {\r\n\t\t\tsocket.on('notification', (notification) => {\r\n\t\t\t\tconsole.log(notification);\r\n\t\t\t\tswitch (notification.type) {\r\n\t\t\t\t\tcase 'party/invite':\r\n\t\t\t\t\t\tsetNotifications((notifications) => {\r\n\t\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\t\t...notifications,\r\n\t\t\t\t\t\t\t\t<Invite\r\n\t\t\t\t\t\t\t\t\tid={notification.data.id}\r\n\t\t\t\t\t\t\t\t\tfrom={notification.data.players[0].username}\r\n\t\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\t\tdestroy={() => destroy(notifications.length)}\r\n\t\t\t\t\t\t\t\t/>,\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'friends/add':\r\n\t\t\t\t\t\tsetNotifications((notifications) => {\r\n\t\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\t\t...notifications,\r\n\t\t\t\t\t\t\t\t<FriendReq\r\n\t\t\t\t\t\t\t\t\tfrom={notification.data}\r\n\t\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\t\tdestroy={() => destroy(notifications.length)}\r\n\t\t\t\t\t\t\t\t/>,\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tif (socket) {\r\n\t\t\t\tsocket.off('notification');\r\n\t\t\t}\r\n\t\t};\r\n\t}, [socket]);\r\n\r\n\treturn <div className=\"notifications\">{notifications}</div>;\r\n}\r\n","import baseUrl from \"./baseUrl\";\r\n\r\nexport const getNotsUrl = baseUrl + '/api/notifications';","import { getNotsUrl } from '../../urls/notificationsUrls';\r\nimport TokenService from '../TokenService/TokenService';\r\n\r\nexport default class NotificationsService {\r\n\tstatic async get() {\r\n\t\tconst res = await fetch(getNotsUrl, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: 'Bearer ' + TokenService.getAccessToken(),\r\n\t\t\t},\r\n        });\r\n        \r\n        const body = await res.json();\r\n        console.log(body, 'get notifications')\r\n\r\n        if (body.err) {\r\n            console.error(body.err)\r\n            return false;\r\n        } else {\r\n            return body;\r\n        }\r\n\t}\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport SocketContext from '../../context/SocketContext';\r\nimport NotificationsService from '../../services/NotificationsService/NotificationsService';\r\nimport { v4 } from 'uuid';\r\nimport FriendReq from '../../components/FriendReq/FriendReq';\r\nimport Invite from '../../components/Invite/Invite';\r\n\r\nimport './notificationsView.scss'\r\n\r\nexport default function NotificationsView() {\r\n    const [nots, setNots] = useState({\r\n        party: [],\r\n        friends: []\r\n    });\r\n\r\n    useEffect(() => {\r\n        NotificationsService.get().then((nots) => {\r\n            if (nots) {\r\n                setNots(nots);\r\n            }\r\n        })\r\n    }, [])\r\n\r\n    function destroyFriendReq(index) {\r\n        setNots(prevState => {\r\n            const nots = {\r\n                ...prevState\r\n            };\r\n            nots.friends.splice(index, 1);\r\n            return nots;\r\n        })\r\n    }\r\n\r\n    function destroyPartyReq(index) {\r\n        setNots(prevState => {\r\n            const nots = {\r\n                ...prevState\r\n            };\r\n            nots.party.splice(index, 1);\r\n            return nots;\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"notificationsView\">\r\n            {\r\n                nots.friends.map((friend, index) => {\r\n                    return (\r\n                        <FriendReq from={friend.username} destroy={() => destroyFriendReq(index)}/>\r\n                    )\r\n                })\r\n            }\r\n            {\r\n                nots.party.map((party, index) => {\r\n                    return (\r\n                        <Invite from={party.players[0].username} id={party.id} destroy={() => destroyPartyReq(index)}/>\r\n                    )\r\n                })\r\n            }\r\n        </div>\r\n    );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport './App.scss';\r\nimport PrivateRoute from './components/PrivateRoute/PrivateRoute';\r\nimport SocketContext from './context/SocketContext';\r\nimport AuthService from './services/AuthService/AuthService';\r\nimport TokenService from './services/TokenService/TokenService';\r\nimport PreLoader from './components/PreLoader/PreLoader';\r\nimport { Switch, Route } from 'react-router';\r\nimport Auth from './views/Auth/Auth';\r\nimport { frontAuthUrl } from './frontUrls/frontAuthUrl';\r\nimport MatchMaking from './views/MathMaking/MatchMaking';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport Friends from './views/Friends/Friends';\r\nimport Notifications from './components/Notifications/Notifications';\r\nimport NotificationsView from './views/NotificationsView/NotificationsView';\r\n\r\nfunction App() {\r\n\tconst [socket, setSocket] = useState(null);\r\n\tconst [showPreloader, setShowPreloader] = useState(true);\r\n\t//#region auth\r\n\tuseEffect(() => {\r\n\t\tif (TokenService.getAccessToken()) {\r\n\t\t\tAuthService.authorize().then((socket) => {\r\n\t\t\t\tsocket.on('connect', () => console.log('connected'));\r\n\r\n\t\t\t\tsocket.on('disconnect', () => {\r\n\t\t\t\t\tconsole.log('disconnected');\r\n\t\t\t\t\tsetShowPreloader(false);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsocket.on('auth', () => {\r\n\t\t\t\t\tconsole.log('authed');\r\n\t\t\t\t\tsetSocket(socket);\r\n\t\t\t\t\tsetShowPreloader(false);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsocket.on('unauth', () => {\r\n\t\t\t\t\tconsole.log('unauth');\r\n\t\t\t\t\tsetShowPreloader(false);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsetShowPreloader(false);\r\n\t\t}\r\n\t}, []);\r\n\t//#endregion\r\n\r\n\tif (showPreloader) {\r\n\t\treturn <PreLoader />;\r\n\t} else if (socket) {\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<SocketContext.Provider value={{ socket: socket }}>\r\n\t\t\t\t\t<BrowserRouter>\r\n\t\t\t\t\t\t<Notifications />\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<PrivateRoute path=\"/\" setSocket={setSocket} exact>\r\n\t\t\t\t\t\t\t\t<MatchMaking />\r\n\t\t\t\t\t\t\t</PrivateRoute>\r\n\t\t\t\t\t\t\t<PrivateRoute path=\"/friends\" setSocket={setSocket} exact>\r\n\t\t\t\t\t\t\t\t<Friends />\r\n\t\t\t\t\t\t\t</PrivateRoute>\r\n\t\t\t\t\t\t\t<PrivateRoute path=\"/notifications\" setSocket={setSocket} exact>\r\n\t\t\t\t\t\t\t\t<NotificationsView />\r\n\t\t\t\t\t\t\t</PrivateRoute>\r\n\t\t\t\t\t\t\t<Route path={frontAuthUrl}>\r\n\t\t\t\t\t\t\t\t<Auth setSocket={setSocket} />\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t<Navbar />\r\n\t\t\t\t\t</BrowserRouter>\r\n\t\t\t\t</SocketContext.Provider>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\tconsole.log('not auhed');\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Auth setSocket={setSocket} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import baseUrl from \"./baseUrl\";\r\n\r\nexport const signupUrl = baseUrl + '/api/auth/signup';\r\n\r\nexport const signinUrl = baseUrl + '/api/auth/signin';\r\n\r\nexport const authorizeUrl = baseUrl + '/api/auth/authorize';\r\n\r\nexport const refreshUrl = baseUrl + '/api/auth/refresh';","import { signupUrl, signinUrl, refreshUrl } from '../../urls/authUrls';\r\nimport io from 'socket.io-client';\r\nimport socketUrl from '../../urls/socketUrl';\r\nimport TokenService from '../TokenService/TokenService';\r\n\r\nclass AuthService {\r\n\tstatic async singup(username, password, email, so2_nickname, so2_id) {\r\n\t\tconst res = await fetch(signupUrl, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password,\r\n\t\t\t\temail: email,\r\n\t\t\t\tso2_nickname: so2_nickname,\r\n\t\t\t\tso2_id: so2_id,\r\n\t\t\t}),\r\n\t\t});\r\n\r\n\t\tconst body = await res.json();\r\n\t\tconsole.log(body);\r\n\r\n\t\tif (body.err) {\r\n\t\t\treturn {\r\n\t\t\t\terr: body.err,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconsole.log(body.access_token);\r\n\t\t\tTokenService.setAccessToken(body.access_token);\r\n\t\t\treturn {\r\n\t\t\t\trefreshToken: body.refresh_token,\r\n\t\t\t\taccess_token: body.access_token,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async signin(username, password) {\r\n\t\tconst res = await fetch(signinUrl, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Authorization': 'Bearer ' + TokenService.getAccessToken(),\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password,\r\n\t\t\t}),\r\n\t\t});\r\n\r\n\t\tconst body = await res.json();\r\n\t\tconsole.log(body);\r\n\r\n\t\tif (body.err) {\r\n\t\t\treturn {\r\n\t\t\t\terr: body.err,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tTokenService.setAccessToken(body.access_token);\r\n\r\n\t\t\treturn {\r\n\t\t\t\trefreshToken: body.refreshToken,\r\n\t\t\t\taccessToken: body.access_token,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async authorize() {\r\n\t\tconst socket = io.connect(socketUrl, {\r\n\t\t\tquery: {\r\n\t\t\t\ttoken: TokenService.getAccessToken(),\r\n\t\t\t},\r\n\t\t\tsecure: true,\r\n\t\t});\r\n\r\n\t\treturn socket;\r\n\t}\r\n\r\n\tstatic async refreshAccessToken(refreshToken) {\r\n\t\tconst res = await fetch(refreshUrl, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: 'Bearer ' + refreshToken,\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\trefresh_token: refreshToken,\r\n\t\t\t}),\r\n\t\t});\r\n\r\n\t\tconst body = await res.json();\r\n\r\n\t\tif (body.err) {\r\n\t\t\treturn {\r\n\t\t\t\terr: body.err,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\taccess_token: body.access_token,\r\n\t\t\t\trefresh_token: body.refresh_token,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default AuthService;\r\n","const { default: AauthService } = require('../AuthService/AuthService');\r\nconst { default: TokenService } = require('../TokenService/TokenService');\r\n\r\nclass JwtErrorService {\r\n\r\n\tstatic async refreshByErr(err) {\r\n\t\tif (err.name === 'jwt expired') {\r\n            const result = await AauthService.refreshAccessToken(TokenService.getRefreshToken());\r\n            if (result.err) {\r\n                TokenService.clear();\r\n                return false\r\n            } else {\r\n                TokenService.setAccessToken(result.access_token);\r\n                return result.access_token\r\n            }\r\n\t\t} else {\r\n            return false\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default JwtErrorService;\r\n","const socketUrl = 'https://totalifydev.tk';\r\n\r\nexport default socketUrl;","class TokenService {\r\n    static getRefreshToken() {\r\n        return localStorage.getItem('refreshToken')\r\n    }\r\n\r\n    static getAccessToken() {\r\n        return localStorage.getItem('accessToken')\r\n    }\r\n\r\n    static setRefreshToken(token) {\r\n        return localStorage.setItem('refreshToken', token);\r\n    }\r\n\r\n    static setAccessToken(token) {\r\n        return localStorage.setItem('accessToken', token);\r\n    }\r\n\r\n    static clear() {\r\n        localStorage.clear();\r\n    }\r\n}\r\n\r\nexport default TokenService;","const baseUrl = 'https://totalifydev.tk';\r\n\r\nexport default baseUrl;"],"sourceRoot":""}